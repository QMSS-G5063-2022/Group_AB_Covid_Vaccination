"0",""
"0","# add the data I want to add to the data"
"0","dat_updated <- dat %>%"
"0","  dplyr::select(ISO_A3, ISO_A2,NAME) %>%"
"0","  # for some reason the iso code for France and Norway are missing"
"0","  # so I fixed these manually"
"0","  mutate(ISO_A3 = ifelse(NAME == ""France"", ""FRA"", ISO_A3)) %>%"
"0","  mutate(ISO_A3 = ifelse(NAME == ""Norway"", ""NOR"", ISO_A3)) %>%"
"0","  mutate(ISO_A2 = ifelse(NAME == ""France"", ""FR"", ISO_A2)) %>%"
"0","  mutate(ISO_A2 = ifelse(NAME == ""Norway"", ""NO"", ISO_A2)) %>%"
"0","  mutate(NAME = ifelse(NAME == ""N. Cyprus"", ""Cyprus"", NAME)) %>%"
"0","  mutate(NAME = ifelse(NAME == ""Eq. Guinea"", ""Equatorial Guinea"", NAME)) %>%"
"0","  mutate(NAME = ifelse(NAME == ""Dominican Rep."", ""Dominican Republic"", NAME)) %>%"
"0","  mutate(NAME = ifelse(NAME == ""Central African Rep."", ""Central African Republic"", NAME)) %>%"
"0","  mutate(NAME = ifelse(NAME == ""United States of America"", ""United States"", NAME)) %>%"
"0",""
"0","  left_join(data, by = c(""NAME"" = ""country"")) %>%"
"0","  # I want to colour missing values in grey in the visualization,"
"0","  # therefore I gave missing values a value of -1."
"0","  # This is needed because teh d3.js colour scale I uses needs numeric values"
"0","  # for the transformation."
"0","  mutate(first = ifelse(is.na(first), -1, first)) %>%"
"0","  mutate(fully = ifelse(is.na(fully), -1, fully)) %>%"
"0","  as.data.frame()"
"0",""
"0",""
"0","# transform data to  to right format"
"0","pid <- sapply(slot(World_polygon, ""polygons""), function(x) slot(x, ""ID""))"
"0","row.names(dat_updated) <- pid"
"0","World_polygon@data <- dat_updated"
"0",""
"0","# Save data"
"0","country_json <- geojson_json(World_polygon)"
"2","Warning:"
"2"," 'geojsonlint' not installed, skipping GeoJSON linting
"
"0","geojson_write(country_json, file = ""/Users/nina/Documents/QMSS5063/final_project/rshiny/src/www/data/country.geojson"")"
"2","Success! File is at /Users/nina/Documents/QMSS5063/final_project/rshiny/src/www/data/country.geojson
"
"1","<geojson-file>"
"1",""
"1","
"
"1","  Path:       "
"1",""
"1","/Users/nina/Documents/QMSS5063/final_project/rshiny/src/www/data/country.geojson"
"1",""
"1","
"
"1","  From class: "
"1",""
"1","json"
"1",""
"1","
"
